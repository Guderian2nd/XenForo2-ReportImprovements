<xf:set var="$actionUser" value="{{ $warningLog.isUserOperation() ? $warningLog.User  : $warningLog.WarnedBy }}"/>
<li class="block-row block-row--separated" data-author="{{ $actionUser.username }}">
	<div class="contentRow">
		<span class="contentRow-figure">
			<xf:avatar user="{$actionUser}" size="s" defaultname="{$reportComment.username}" />
		</span>
		<div class="contentRow-main">
			<div class="contentRow-extra contentRow-extra--small">
				<ul class="listInline listInline--bullet">
					<xf:if is="$reportComment.state_change">
						<li>{{ phrase('status_changed:') }} {$report.getReportState($reportComment.state_change)}</li>
					</xf:if>
					<xf:if is="$reportComment.WarningLog">
						<li>{{ phrase('svReportImprov_operation_type:') }} {$reportComment.WarningLog.OperationTypePhrase}</li>
					</xf:if>
				</ul>
			</div>
			<h3 class="contentRow-title">
				<a href="{{ link('reports/comment', $reportComment) }}">{{ snippet($warningLog.title, 100, {'term': $options.term, 'fromStart': true, 'stripPlainTag': true}) }}</a>
			</h3>
			
			<div class="contentRow-snippet">{{ snippet(trim($warningLog.notes), 300, {'term': $options.term, 'stripQuote': true}) }}</div>

			<div class="contentRow-minor contentRow-minor--hideLinks">
				<ul class="listInline listInline--bullet">
					<li><xf:username user="{$actionUser}" defaultname="{$reportComment.username}" /></li>
					<li><xf:trim>
						<xf:if is="$reportComment.WarningLog">
							{{ phrase('warning') }}
						<xf:elseif is="$reportComment.is_report" />
							{{ phrase('svReportImprov_user_report') }}
						<xf:else />
							{{ phrase('svReportImprov_report_comment') }}
						</xf:if>
					</xf:trim></li>
					<xf:if is="$warningLog.expiry_date">
						<li>{{ phrase('svReportImprove_expiry_date:') }} {{ date($warningLog.expiry_date) }}</li>
					</xf:if>
					<xf:if is="$warningLog.points">
						<li>{{ phrase('points:') }} {$warningLog.points|number}</li>
					</xf:if>
					<li><xf:date time="{$reportComment.comment_date}" /></li>
					<xf:if is="$report.assigned_user_id && $report.AssignedUser">
						<li>{{ phrase('svReportImprov_assigned_to:') }} <xf:username user="{$report.AssignedUser}"/></li>
						<xf:if is="$report.assigned_user_id !== $report.assigner_user_id && $report.AssignerUser">
						<li>{{ phrase('svReportImprov_by_assigner_x:', {'value':  username_link($report.AssignedUser) }) }}</li>
						</xf:if>
					</xf:if>
				</ul>
			</div>
		</div>
	</div>
</li>